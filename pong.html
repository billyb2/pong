<canvas id="canvas"></canvas>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext('2d');

ctx.canvas.width = 900;
ctx.canvas.height = 500;

var keys = [];


//Sets up player object-prototype
//Would normally just setup 2 players, but might add 4 player support
function Player(player) {
	this.x = player.x;
	this.y = player.y

	this.width = player.width;
	this.height = player.height;
    
    this.speed = player.speed;

}


//Ball object-prototype
//Again, might have powerups or something if I get the basic game done early, might as well make it easy to have multiple balls
function Ball(ball){
	this.x = ball.x;
    this.y = ball.y;
    
    this.width = ball.width;
    this.height = ball.height;
    
    this.speed = ball.speed;
    this.direction;
    this.angle = 0;
    this.velX = 0;
    this.velY = 0;
    
}

var player1 = new Player({
	x: 0,
	y: ctx.canvas.height / 2 - 50,
	width: 20,
	height: 100,
    speed: 8


});

var player2 = new Player({
	x: ctx.canvas.width - 20,
	y: ctx.canvas.height / 2 - 50,
	width: 20,
	height: 100,
    speed: 8


});


var ball = new Ball({
	x: ctx.canvas.width/2 - 5,
    y: ctx.canvas.height/2 - 5,
    width: 10,
    height: 10,
    speed: 4

});



	//Key detection stuff
	document.body.addEventListener("keydown", function(e) {
		keys[e.keyCode] = true;
	});
	document.body.addEventListener("keyup", function(e) {
		keys[e.keyCode] = false;
	});


ball.angle = Math.floor(Math.random() * 89) + 1

ball.velX = 5;
ball.velY = 5;


if(Math.random() > 0.5){
	ball.direction = "left";
} else {
	ball.direction = "right";
}


function frame() {
	//Clears screen
	ctx.fillStyle = "black";
	ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);

	//Draws players
	ctx.fillStyle = "white";
	ctx.fillRect(player1.x, player1.y, player1.width, player1.height);

	ctx.fillStyle = "white";
	ctx.fillRect(player2.x, player2.y, player2.width, player2.height);
    
    //Draw ball(s)
    ctx.fillStyle = "white";
    ctx.fillRect(ball.x, ball.y, ball.width, ball.height)



	





	//Player 1 movement
	if (keys[38]) {
    	if(player1.y >= 0){
    		player1.y -= player1.speed;
        }
        
    } else if (keys[40]){
    	if(player1.y <= ctx.canvas.height - player1.height){
    		player1.y += player1.speed;
        }
    }
    
    
    //Player 2 movement
    if (keys[87]) {
    	if(player2.y >= 0){
    		player2.y -= player2.speed;
        }
    } else if(keys[83]) {
    	if(player2.y <= ctx.canvas.height - player1.height){
    		player2.y += player2.speed;
        }
    }

    
    
    //Ball collision against top and bottom wall
    if(ball.y <= 0 || ball.y+ ball.height >= ctx.canvas.height){
    	ball.velY = -ball.velY;
    } 
    
    if(ball.x <= player1.x + player1.width && ball.y + ball.height >= player1.y && ball.y <= player1.y + player1.height){
    	ball.velX = -ball.velX;
    }
    
    if(ball.x >= player2.x && ball.y + ball.height >= player2.y && ball.y <= player2.y + player2.height){
    	ball.velX = -ball.velX;
    }
    
    
    //Ball movement
    if(ball.direction == "right"){
      ball.x += ball.velX * Math.cos(ball.angle * Math.PI / 180);
      ball.y += ball.velY * Math.sin(ball.angle * Math.PI / 180);
    } else if (ball.direction == "left"){
      ball.x -= ball.velX * Math.cos(ball.angle * Math.PI / 180);
      ball.y -= ball.velY * Math.sin(ball.angle * Math.PI / 180);
    }



	requestAnimationFrame(frame);




}

frame();


</script>
